{"is_source_file": true, "format": "Python", "description": "This file defines API views and viewsets for an online shopping backend, including user authentication, category and product CRUD operations, cart management, order processing, and health check endpoint. It uses Django Rest Framework and Swagger auto schema for API documentation.", "external_files": ["django.contrib.auth", "django.db", "django.shortcuts", "drf_yasg.utils", "rest_framework", ".models", ".serializers"], "external_methods": ["authenticate", "get_user_model", "login", "logout", "get_object_or_404", "swagger_auto_schema"], "published": ["health", "register", "login_view", "logout_view", "CategoryViewSet", "ProductViewSet", "CartViewSet", "OrderViewSet", "IsAdminOrReadOnly"], "classes": [{"name": "IsAdminOrReadOnly", "description": "Permission class allowing read-only access for all and write access only for staff users."}, {"name": "CategoryViewSet", "description": "Viewset providing CRUD operations for product categories, with list and create actions."}, {"name": "ProductViewSet", "description": "Viewset for CRUD operations and filtering of products including listing, retrieving, creating, updating, and deleting products."}, {"name": "CartViewSet", "description": "Viewset managing current user's shopping cart, including viewing, adding, removing, clearing items, and checkout creating an order."}, {"name": "OrderViewSet", "description": "Read-only viewset for listing and retrieving user-specific orders."}], "methods": [{"name": "health(request)", "description": "Health check endpoint returning server status.", "scope": "", "scopeKind": ""}, {"name": "register(request)", "description": "Endpoint for user registration, creating a new user account.", "scope": "", "scopeKind": ""}, {"name": "login_view(request)", "description": "Endpoint for user login, establishing a session.", "scope": "", "scopeKind": ""}, {"name": "logout_view(request)", "description": "Endpoint to log out current user, ending session.", "scope": "", "scopeKind": ""}, {"name": "list(self, request, *args, **kwargs)", "description": "List method for CategoryViewSet.", "scope": "ProductViewSet", "scopeKind": "class"}, {"name": "create(self, request, *args, **kwargs)", "description": "Create method for CategoryViewSet.", "scope": "ProductViewSet", "scopeKind": "class"}, {"name": "get_queryset(self)", "description": "Get queryset with filters for products.", "scope": "ProductViewSet", "scopeKind": "class"}, {"name": "list", "description": "List method for ProductViewSet."}, {"name": "retrieve(self, request, *args, **kwargs)", "description": "Retrieve a single product.", "scope": "ProductViewSet", "scopeKind": "class"}, {"name": "create", "description": "Create a new product."}, {"name": "update(self, request, *args, **kwargs)", "description": "Update a product.", "scope": "ProductViewSet", "scopeKind": "class"}, {"name": "partial_update(self, request, *args, **kwargs)", "description": "Partially update a product.", "scope": "ProductViewSet", "scopeKind": "class"}, {"name": "destroy(self, request, *args, **kwargs)", "description": "Delete a product.", "scope": "ProductViewSet", "scopeKind": "class"}, {"name": "list", "description": "List user's current cart."}, {"name": "add_item(self, request)", "description": "Add or update an item in the user's cart.", "scope": "CartViewSet", "scopeKind": "class"}, {"name": "remove_item(self, request)", "description": "Remove an item from the user's cart.", "scope": "CartViewSet", "scopeKind": "class"}, {"name": "clear(self, request)", "description": "Clear all items from the cart.", "scope": "CartViewSet", "scopeKind": "class"}, {"name": "checkout(self, request)", "description": "Process checkout, create order, and update stock.", "scope": "CartViewSet", "scopeKind": "class"}, {"name": "list", "description": "List current user's orders."}, {"name": "retrieve", "description": "Retrieve details of a specific order."}, {"name": "Cart _get_or_create_cart(self, user)", "scope": "CartViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "has_permission(self, request, view)", "scope": "IsAdminOrReadOnly", "scopeKind": "class", "description": "unavailable"}], "calls": ["authenticate", "get_user_model", "login", "logout", "get_object_or_404", "super().list", "super().create", "super().retrieve", "super().update", "super().partial_update", "super().destroy", "Order.objects.create", "OrderItem.objects.bulk_create", "Product.save", "Cart.items.all", "Cart.items.select_related", "CartItem.objects.get_or_create", "CartItem.objects.filter", "Order.objects.filter", "Order.objects.bulk_create"], "search-terms": ["DRF views", "Cart checkout and stock management", "User registration and login", "Order processing", "Product filtering", "Category management"], "state": 2, "file_id": 3, "knowledge_revision": 55, "git_revision": "3e4d63d4ad646775e5718ae25a132bfc8af63e87", "revision_history": [{"28": "45b874a6edd9fa6239650e8802a7615e31c0be25"}, {"41": "45b874a6edd9fa6239650e8802a7615e31c0be25"}, {"55": "3e4d63d4ad646775e5718ae25a132bfc8af63e87"}], "ctags": [{"_type": "tag", "name": "CartViewSet", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^class CartViewSet(viewsets.GenericViewSet, mixins.ListModelMixin):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "CategoryViewSet", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^class CategoryViewSet(viewsets.ModelViewSet):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "IsAdminOrReadOnly", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^class IsAdminOrReadOnly(permissions.BasePermission):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "OrderViewSet", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^class OrderViewSet(viewsets.ReadOnlyModelViewSet):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ProductViewSet", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^class ProductViewSet(viewsets.ModelViewSet):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "User", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^User = get_user_model()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_get_or_create_cart", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def _get_or_create_cart(self, user) -> Cart:$/", "language": "Python", "typeref": "typename:Cart", "kind": "member", "signature": "(self, user)", "scope": "CartViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "add_item", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def add_item(self, request):$/", "language": "Python", "kind": "member", "signature": "(self, request)", "scope": "CartViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "checkout", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def checkout(self, request):$/", "language": "Python", "kind": "member", "signature": "(self, request)", "scope": "CartViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "clear", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def clear(self, request):$/", "language": "Python", "kind": "member", "signature": "(self, request)", "scope": "CartViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "create", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def create(self, request, *args, **kwargs):$/", "language": "Python", "kind": "member", "signature": "(self, request, *args, **kwargs)", "scope": "CategoryViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "create", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def create(self, request, *args, **kwargs):$/", "language": "Python", "kind": "member", "signature": "(self, request, *args, **kwargs)", "scope": "ProductViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "destroy", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def destroy(self, request, *args, **kwargs):$/", "language": "Python", "kind": "member", "signature": "(self, request, *args, **kwargs)", "scope": "ProductViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "get_queryset", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def get_queryset(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "CartViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "get_queryset", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def get_queryset(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "OrderViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "get_queryset", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def get_queryset(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "ProductViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "has_permission", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def has_permission(self, request, view):$/", "language": "Python", "kind": "member", "signature": "(self, request, view)", "scope": "IsAdminOrReadOnly", "scopeKind": "class"}, {"_type": "tag", "name": "health", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^def health(request):$/", "language": "Python", "kind": "function", "signature": "(request)"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def list(self, request, *args, **kwargs):$/", "language": "Python", "kind": "member", "signature": "(self, request, *args, **kwargs)", "scope": "CartViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def list(self, request, *args, **kwargs):$/", "language": "Python", "kind": "member", "signature": "(self, request, *args, **kwargs)", "scope": "CategoryViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def list(self, request, *args, **kwargs):$/", "language": "Python", "kind": "member", "signature": "(self, request, *args, **kwargs)", "scope": "OrderViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def list(self, request, *args, **kwargs):$/", "language": "Python", "kind": "member", "signature": "(self, request, *args, **kwargs)", "scope": "ProductViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "login_view", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^def login_view(request):$/", "language": "Python", "kind": "function", "signature": "(request)"}, {"_type": "tag", "name": "logout_view", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^def logout_view(request):$/", "language": "Python", "kind": "function", "signature": "(request)"}, {"_type": "tag", "name": "partial_update", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def partial_update(self, request, *args, **kwargs):$/", "language": "Python", "kind": "member", "signature": "(self, request, *args, **kwargs)", "scope": "ProductViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "permission_classes", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    permission_classes = [IsAdminOrReadOnly]$/", "language": "Python", "kind": "variable", "scope": "CategoryViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "permission_classes", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    permission_classes = [IsAdminOrReadOnly]$/", "language": "Python", "kind": "variable", "scope": "ProductViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "permission_classes", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    permission_classes = [permissions.IsAuthenticated]$/", "language": "Python", "kind": "variable", "scope": "CartViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "permission_classes", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    permission_classes = [permissions.IsAuthenticated]$/", "language": "Python", "kind": "variable", "scope": "OrderViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "queryset", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    queryset = Category.objects.all().order_by(\"name\")$/", "language": "Python", "kind": "variable", "scope": "CategoryViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "queryset", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    queryset = Product.objects.filter(is_active=True).select_related(\"category\").order_by($/", "language": "Python", "kind": "variable", "scope": "ProductViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "register", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^def register(request):$/", "language": "Python", "kind": "function", "signature": "(request)"}, {"_type": "tag", "name": "remove_item", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def remove_item(self, request):$/", "language": "Python", "kind": "member", "signature": "(self, request)", "scope": "CartViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "retrieve", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def retrieve(self, request, *args, **kwargs):$/", "language": "Python", "kind": "member", "signature": "(self, request, *args, **kwargs)", "scope": "OrderViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "retrieve", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def retrieve(self, request, *args, **kwargs):$/", "language": "Python", "kind": "member", "signature": "(self, request, *args, **kwargs)", "scope": "ProductViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "serializer_class", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    serializer_class = CartSerializer$/", "language": "Python", "kind": "variable", "scope": "CartViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "serializer_class", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    serializer_class = CategorySerializer$/", "language": "Python", "kind": "variable", "scope": "CategoryViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "serializer_class", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    serializer_class = OrderSerializer$/", "language": "Python", "kind": "variable", "scope": "OrderViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "serializer_class", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    serializer_class = ProductSerializer$/", "language": "Python", "kind": "variable", "scope": "ProductViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "update", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def update(self, request, *args, **kwargs):$/", "language": "Python", "kind": "member", "signature": "(self, request, *args, **kwargs)", "scope": "ProductViewSet", "scopeKind": "class"}], "hash": "d7b45d04b32c0b160097349b3fceadaf", "format-version": 4, "code-base-name": "online_kart_backend", "filename": "online_kart_backend/api/views.py", "fields": [{"name": "User = get_user_model()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "permission_classes = [IsAdminOrReadOnly]", "scope": "CategoryViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "permission_classes = [permissions.IsAuthenticated]", "scope": "CartViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "queryset = Category.objects.all().order_by(\"name\")", "scope": "CategoryViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "queryset = Product.objects.filter(is_active=True).select_related(\"category\").order_by(", "scope": "ProductViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "serializer_class = CartSerializer", "scope": "CartViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "serializer_class = CategorySerializer", "scope": "CategoryViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "serializer_class = OrderSerializer", "scope": "OrderViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "serializer_class = ProductSerializer", "scope": "ProductViewSet", "scopeKind": "class", "description": "unavailable"}]}