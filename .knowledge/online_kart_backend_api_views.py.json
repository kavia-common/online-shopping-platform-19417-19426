{"is_source_file": true, "format": "Python", "description": "This file defines REST API views and viewsets for an online shopping platform backend, using Django REST Framework. It includes endpoints for health checks, user registration, login/logout, category management, product listing, cart management, order processing, and user-specific order retrieval.", "external_files": ["django.contrib.auth", "django.db", "django.shortcuts", "drf_yasg.utils", "rest_framework", ".models", ".serializers"], "external_methods": ["authenticate", "get_user_model", "login", "logout", "get_object_or_404"], "published": ["health", "register", "login_view", "logout_view", "CategoryViewSet", "ProductViewSet", "CartViewSet", "OrderViewSet", "IsAdminOrReadOnly"], "classes": [{"name": "IsAdminOrReadOnly", "description": "Permission class that allows read-only access for all users and write access only for staff users."}, {"name": "CategoryViewSet", "description": "ViewSet for CRUD operations on product categories."}, {"name": "ProductViewSet", "description": "ViewSet for CRUD operations on products, with filtering by category and search query."}, {"name": "CartViewSet", "description": "ViewSet for managing user cart: viewing, adding, removing, clearing items, and checkout process."}, {"name": "OrderViewSet", "description": "Read-only ViewSet for retrieving user orders."}], "methods": [{"name": "health(request)", "description": "Health check endpoint that returns server status.", "scope": "", "scopeKind": ""}, {"name": "register(request)", "description": "Endpoint to register a new user and return user profile data.", "scope": "", "scopeKind": ""}, {"name": "login_view(request)", "description": "Authenticate and log in a user, establishing a session.", "scope": "", "scopeKind": ""}, {"name": "logout_view(request)", "description": "Log out the current authenticated user.", "scope": "", "scopeKind": ""}, {"name": "Cart _get_or_create_cart(self, user)", "scope": "CartViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "add_item(self, request)", "scope": "CartViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "checkout(self, request)", "scope": "CartViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "clear(self, request)", "scope": "CartViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "create(self, request, *args, **kwargs)", "scope": "ProductViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "destroy(self, request, *args, **kwargs)", "scope": "ProductViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "get_queryset(self)", "scope": "ProductViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "has_permission(self, request, view)", "scope": "IsAdminOrReadOnly", "scopeKind": "class", "description": "unavailable"}, {"name": "list(self, request, *args, **kwargs)", "scope": "ProductViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "partial_update(self, request, *args, **kwargs)", "scope": "ProductViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "remove_item(self, request)", "scope": "CartViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "retrieve(self, request, *args, **kwargs)", "scope": "ProductViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "update(self, request, *args, **kwargs)", "scope": "ProductViewSet", "scopeKind": "class", "description": "unavailable"}], "calls": ["django.contrib.auth.authenticate", "django.contrib.auth.login", "django.contrib.auth.logout", "django.shortcuts.get_object_or_404", "Category.objects.all", "Product.objects.filter", "Cart.objects.filter", "CartItem.objects.get_or_create", "Order.objects.create", "OrderItem.objects.bulk_create"], "search-terms": ["API views", "shopping cart", "order processing", "product CRUD", "category management", "user authentication", "DRF viewsets", "serializers", "permissions"], "state": 2, "file_id": 3, "knowledge_revision": 41, "git_revision": "45b874a6edd9fa6239650e8802a7615e31c0be25", "revision_history": [{"28": "45b874a6edd9fa6239650e8802a7615e31c0be25"}, {"41": "45b874a6edd9fa6239650e8802a7615e31c0be25"}], "ctags": [{"_type": "tag", "name": "CartViewSet", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^class CartViewSet(viewsets.GenericViewSet, mixins.ListModelMixin):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "CategoryViewSet", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^class CategoryViewSet(viewsets.ModelViewSet):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "IsAdminOrReadOnly", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^class IsAdminOrReadOnly(permissions.BasePermission):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "OrderViewSet", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^class OrderViewSet(viewsets.ReadOnlyModelViewSet):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ProductViewSet", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^class ProductViewSet(viewsets.ModelViewSet):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "User", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^User = get_user_model()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_get_or_create_cart", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def _get_or_create_cart(self, user) -> Cart:$/", "language": "Python", "typeref": "typename:Cart", "kind": "member", "signature": "(self, user)", "scope": "CartViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "add_item", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def add_item(self, request):$/", "language": "Python", "kind": "member", "signature": "(self, request)", "scope": "CartViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "checkout", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def checkout(self, request):$/", "language": "Python", "kind": "member", "signature": "(self, request)", "scope": "CartViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "clear", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def clear(self, request):$/", "language": "Python", "kind": "member", "signature": "(self, request)", "scope": "CartViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "create", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def create(self, request, *args, **kwargs):$/", "language": "Python", "kind": "member", "signature": "(self, request, *args, **kwargs)", "scope": "CategoryViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "create", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def create(self, request, *args, **kwargs):$/", "language": "Python", "kind": "member", "signature": "(self, request, *args, **kwargs)", "scope": "ProductViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "destroy", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def destroy(self, request, *args, **kwargs):$/", "language": "Python", "kind": "member", "signature": "(self, request, *args, **kwargs)", "scope": "ProductViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "get_queryset", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def get_queryset(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "CartViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "get_queryset", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def get_queryset(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "OrderViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "get_queryset", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def get_queryset(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "ProductViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "has_permission", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def has_permission(self, request, view):$/", "language": "Python", "kind": "member", "signature": "(self, request, view)", "scope": "IsAdminOrReadOnly", "scopeKind": "class"}, {"_type": "tag", "name": "health", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^def health(request):$/", "language": "Python", "kind": "function", "signature": "(request)"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def list(self, request, *args, **kwargs):$/", "language": "Python", "kind": "member", "signature": "(self, request, *args, **kwargs)", "scope": "CartViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def list(self, request, *args, **kwargs):$/", "language": "Python", "kind": "member", "signature": "(self, request, *args, **kwargs)", "scope": "CategoryViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def list(self, request, *args, **kwargs):$/", "language": "Python", "kind": "member", "signature": "(self, request, *args, **kwargs)", "scope": "OrderViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def list(self, request, *args, **kwargs):$/", "language": "Python", "kind": "member", "signature": "(self, request, *args, **kwargs)", "scope": "ProductViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "login_view", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^def login_view(request):$/", "language": "Python", "kind": "function", "signature": "(request)"}, {"_type": "tag", "name": "logout_view", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^def logout_view(request):$/", "language": "Python", "kind": "function", "signature": "(request)"}, {"_type": "tag", "name": "partial_update", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def partial_update(self, request, *args, **kwargs):$/", "language": "Python", "kind": "member", "signature": "(self, request, *args, **kwargs)", "scope": "ProductViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "permission_classes", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    permission_classes = [IsAdminOrReadOnly]$/", "language": "Python", "kind": "variable", "scope": "CategoryViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "permission_classes", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    permission_classes = [IsAdminOrReadOnly]$/", "language": "Python", "kind": "variable", "scope": "ProductViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "permission_classes", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    permission_classes = [permissions.IsAuthenticated]$/", "language": "Python", "kind": "variable", "scope": "CartViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "permission_classes", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    permission_classes = [permissions.IsAuthenticated]$/", "language": "Python", "kind": "variable", "scope": "OrderViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "queryset", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    queryset = Category.objects.all().order_by(\"name\")$/", "language": "Python", "kind": "variable", "scope": "CategoryViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "queryset", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    queryset = Product.objects.filter(is_active=True).select_related(\"category\").order_by($/", "language": "Python", "kind": "variable", "scope": "ProductViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "register", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^def register(request):$/", "language": "Python", "kind": "function", "signature": "(request)"}, {"_type": "tag", "name": "remove_item", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def remove_item(self, request):$/", "language": "Python", "kind": "member", "signature": "(self, request)", "scope": "CartViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "retrieve", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def retrieve(self, request, *args, **kwargs):$/", "language": "Python", "kind": "member", "signature": "(self, request, *args, **kwargs)", "scope": "OrderViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "retrieve", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def retrieve(self, request, *args, **kwargs):$/", "language": "Python", "kind": "member", "signature": "(self, request, *args, **kwargs)", "scope": "ProductViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "serializer_class", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    serializer_class = CartSerializer$/", "language": "Python", "kind": "variable", "scope": "CartViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "serializer_class", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    serializer_class = CategorySerializer$/", "language": "Python", "kind": "variable", "scope": "CategoryViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "serializer_class", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    serializer_class = OrderSerializer$/", "language": "Python", "kind": "variable", "scope": "OrderViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "serializer_class", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    serializer_class = ProductSerializer$/", "language": "Python", "kind": "variable", "scope": "ProductViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "update", "path": "/home/kavia/workspace/code-generation/online-shopping-platform-19417-19426/online_kart_backend/api/views.py", "pattern": "/^    def update(self, request, *args, **kwargs):$/", "language": "Python", "kind": "member", "signature": "(self, request, *args, **kwargs)", "scope": "ProductViewSet", "scopeKind": "class"}], "hash": "a6ad6c1dec50393d9bdcd2aa9697e609", "format-version": 4, "code-base-name": "online_kart_backend", "filename": "online_kart_backend/api/views.py", "fields": [{"name": "User = get_user_model()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "permission_classes = [IsAdminOrReadOnly]", "scope": "CategoryViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "permission_classes = [permissions.IsAuthenticated]", "scope": "CartViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "queryset = Category.objects.all().order_by(\"name\")", "scope": "CategoryViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "queryset = Product.objects.filter(is_active=True).select_related(\"category\").order_by(", "scope": "ProductViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "serializer_class = CartSerializer", "scope": "CartViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "serializer_class = CategorySerializer", "scope": "CategoryViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "serializer_class = OrderSerializer", "scope": "OrderViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "serializer_class = ProductSerializer", "scope": "ProductViewSet", "scopeKind": "class", "description": "unavailable"}]}